<!doctype html>
<html ng-app="demo">
  <head>
    <title>Bradypodion transition demo</title>
    <link rel="stylesheet" href="../../../../dist/bradypodion.css">
    <meta charset="UTF-8">
    <meta name="HandheldFriendly" content="True">
    <meta name="MobileOptimized" content="320">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, target-densitydpi=device-dpi">
    <meta name="viewport" content="initial-scale=1.0,user-scalable=no,maximum-scale=1" media="(device-height: 568px)" />
    <meta name="apple-mobile-web-app-capable" content="yes">
  </head>
  <body ng-init="friends = [{name:'John', phone:'555-1276'},
                            {name:'Mary', phone:'800-BIG-MARY'},
                            {name:'Mike', phone:'555-4321'},
                            {name:'Adam', phone:'555-5678'},
                            {name:'Julie', phone:'555-8765'}]">
    <div ng-controller="ViewController" ui-view ng-animate="getFullTransition()"></div>

    <script type='text/javascript' src='../../../../components/lodash/index.js'></script>
    <script type='text/javascript' src='../../../../components/jquery/index.js'></script>
    <script type='text/javascript' src='../../../../components/angular/index.js'></script>
    <script type='text/javascript' src='../../../../components/angular-ui-router/index.js'></script>
    <script type='text/javascript' src='../../../../dist/bradypodion.js'></script>
    <script>
      function ViewController($scope, $state)  {
        var transition = '';
        var direction = 'normal';

        $scope.to = function(state, back) {
          direction = back?'reverse':'normal';
          $state.transitionTo(state);
        };

        $scope.setTransition = function(newTransition) {
          transition = newTransition;
        };

        $scope.getDirection = function() {
          return direction;
        };

        $scope.getFullTransition = function() {
          return transition +'-'+ direction;
        };

        $scope.$on('$stateChangeStart', function(event, toState, toParams, fromState, fromParams) {
          $scope = event.currentScope;
          if ($scope.getDirection() === 'reverse') {
            $scope.setTransition(fromState.transition);
          } else {
            $scope.setTransition(toState.transition);
          }
        });
      };

      angular.module('demo', ['bp','ui.state'])
        .config(['$stateProvider', '$urlRouterProvider', function($stateProvider, $urlRouterProvider) {
          $urlRouterProvider.otherwise('/home');

          $stateProvider
            .state('home', {
              url: '/home',
              templateUrl: 'home.html',
              transition: 'fade'
            })
            .state('second', {
              url: '/second',
              templateUrl: 'second.html',
              transition: 'scale'
            });
        }]);
    </script>
  </body>
</html>
